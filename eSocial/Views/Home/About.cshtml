@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model List<Portal.Business.Models.ValidateUsuario>
@{
    int id_usuario_aux = 0;
}

<div class="row">
    <div class="col-md-5">
        <h5>Detalhamento - RH / Departamento Pessoal</h5>
    </div>
    <div class="col-md-5">
        <h5> @Html.ActionLink("Voltar", "index", "Home")</h5>
</div>
</div>
<hr />
<div class="row">
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-danger">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-comments fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">Validação: @Model.Count() erro(s)</div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left"></span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-danger">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-tasks fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">@Model.GroupBy(g => g.id_usuario).Count() Funcionário(s)</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left"></span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-danger">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-comments fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">165 - Total de Campos</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left"></span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="btn-group">
        <a href="#" class="btn btn-default">Exportar</a>
        <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
        <ul class="dropdown-menu">
            <li><a href="@Url.Action("Export")">Excel</a></li>
            <li><a href="#">PDF</a></li>
        </ul>
    </div>
</div>
<!-- /.row -->

<div class="row">
    <div class="col-md-11">
        <table id="example" cellpadding = "5" class="display" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>Funcionário</th>
                    <th>Campo</th>
                    <th>Erro</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    /*if (id_usuario_aux != item.id_usuario)
                    {
                        <tr>
                            <td class="text-danger" colspan="2" style="background:#eee">
                                <i class="glyphicon glyphicon-exclamation-sign"></i>  Usuário: @item.nome_usuario
                            </td>
                        </tr>
                    }*/
                    <tr class="info">
                        <td class="text-danger" style="background:#eee">
                            <i class="glyphicon glyphicon-exclamation-sign"></i>  Usuário: @item.nome_usuario
                        </td>
                        <td>@item.campo</td>
                        <td>@item.erro</td>
                    </tr>

                    id_usuario_aux = item.id_usuario;
                }
            </tbody>

        </table>
    </div>
</div>
<script type="text/javascript">
    $('#example').dataTable({
        "language": {
            "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Portuguese-Brasil.json",
            "dom": 'T<"clear">lfrtip',
            "tableTools": {
                "sSwfPath": "/swf/ZeroClipboard.swf"
            }
        }

    });
</script>
